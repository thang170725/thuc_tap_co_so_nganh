{% extends 'base.html' %}
{% load static %}

{% block title %}Cập nhật thông tin{% endblock title %}

{% block role_specific_links %}
    {% if user_profile.role == 'admin' %}
        <div>
            <ul class="main-menu">
                <li><i class="fa-solid fa-people-group"></i>Thông tin
                    <ul class="child-menu">
                        <li><a href="{% url 'admin_teacher_infor' %}" class="nav-item">Thông tin giảng viên</a></li>
                        <li><a href="{% url 'admin_student_infor' %}" class="nav-item">Thông tin sinh viên</a></li>
                    </ul>
                </li>
            </ul>
        </div>  
        <a href="{% url 'event_management' %}" class="nav-item"><i class="fas fa-calendar-check"></i> Quản lý Sự kiện</a>
    {% endif %}
{% endblock role_specific_links %}

{% block user_info %}
    <div class="get-username">
        Xin chào, {{ user.username }}<br> 
        <span style="font-size: 16px;">{{ user_profile.get_role_display }}</span>
    </div>
{% endblock user_info %}

{% block content %}
<div style="padding: 20px; background-color: white; margin: 20px; border-radius: 8px;">
    
    <h2 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">Cập nhật thông tin cá nhân</h2>

    {% if messages %}
        {% for message in messages %}
            <div style="padding: 15px; margin: 20px 0; border-radius: 5px; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <div class="account-section" style="margin-top: 20px;">
        <p>Tài khoản: <strong>{{ user.username }}</strong> (Vai trò: <strong>{{ user_profile.get_role_display }}</strong>)</p>
        
        <form method="POST" novalidate style="margin-top: 20px;">
            {% csrf_token %}
            
            {{ profile_form.as_p }}
            
            <button type="submit" name="submit_profile" style="padding: 10px 15px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
                Lưu thay đổi
            </button>
        </form>
    </div>
</div>
{% endblock content %}